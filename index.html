<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qwen3-1.7B 对话助手</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="app">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="logo">
                <i class="fas fa-brain"></i>
                <h2>Qwen助手</h2>
            </div>
            
            <div class="model-info">
                <div class="info-item">
                    <span class="label">模型:</span>
                    <span class="value">Qwen3-1.7B</span>
                </div>
                <div class="info-item">
                    <span class="label">状态:</span>
                    <span class="status online"><i class="fas fa-circle"></i> 在线</span>
                </div>
            </div>
            
            <button class="new-chat" onclick="newChat()">
                <i class="fas fa-plus"></i> 新对话
            </button>
            
            <div class="api-config">
                <h3><i class="fas fa-key"></i> API配置</h3>
                <div class="config-details">
                    <div class="config-item">
                        <span>服务: random wander</span>
                    </div>
                    <div class="config-item">
                        <span>端点: https://maas-api.cn-huabel-1.xf-yun.com/v1</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 主聊天区域 -->
        <div class="main-content">
            <div class="chat-header">
                <h1><i class="fas fa-robot"></i> AI对话助手</h1>
                <div class="controls">
                    <button onclick="exportChat()" title="导出对话">
                        <i class="fas fa-download"></i>
                    </button>
                    <button onclick="clearChat()" title="清空对话">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>

            <div class="chat-container" id="chatContainer">
                <!-- 消息会在这里显示 -->
                <div class="message ai first">
                    <div class="avatar">AI</div>
                    <div class="content">
                        <div class="text">
                            你好！我是基于Qwen3-1.7B模型的智能助手。我可以回答各种问题、进行对话交流、提供建议等。
                            有什么可以帮助您的吗？
                        </div>
                        <div class="time">现在</div>
                    </div>
                </div>
            </div>

            <div class="input-area">
                <div class="input-wrapper">
                    <div class="input-box">
                        <textarea 
                            id="messageInput" 
                            placeholder="输入消息... (Enter发送，Shift+Enter换行)"
                            rows="1"
                            oninput="autoResize(this)"
                            onkeydown="handleKeyDown(event)"
                        ></textarea>
                        <div class="input-actions">
                            <button class="send-btn" onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    <div class="input-hint">
                        <span class="hint"><i class="fas fa-info-circle"></i> 基于讯飞星火API的Qwen3-1.7B模型</span>
                        <span class="token-count" id="tokenCount">长度: 0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 加载指示器 -->
        <div id="loading" class="loading-overlay">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>AI正在思考...</p>
            </div>
        </div>
    </div>

    <!-- 引入配置和主逻辑 -->
    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
